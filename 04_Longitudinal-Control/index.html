
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Deterministic reference stack for the CarRacing-v3 simulator">
      
      
      
        <link rel="canonical" href="https://example.com/04_Longitudinal-Control/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Longitudinal Control of a Vehicle - Modular SDC Pipeline</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#longitudinal-control-of-a-vehicle" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Modular SDC Pipeline" class="md-header__button md-logo" aria-label="Modular SDC Pipeline" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Modular SDC Pipeline
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Longitudinal Control of a Vehicle
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/USER/Modular-SDC-Pipeline" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Modular SDC Pipeline" class="md-nav__button md-logo" aria-label="Modular SDC Pipeline" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Modular SDC Pipeline
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/USER/Modular-SDC-Pipeline" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scientific Reference
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-the-pid-control-law" class="md-nav__link">
    <span class="md-ellipsis">
      2. The PID Control Law
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. The PID Control Law">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-control-objective" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Control Objective
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-discrete-pid-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Discrete PID Formulation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-control-theoretic-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Control-Theoretic Interpretation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-understanding-the-components" class="md-nav__link">
    <span class="md-ellipsis">
      3. Understanding the Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Understanding the Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-proportional-term-k_p-et" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Proportional Term ( K_p e(t) )
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-integral-term-k_i-sum-el" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Integral Term ( K_i \sum e(l) )
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-derivative-term-k_d-et-et-1" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Derivative Term ( K_d [e(t) - e(t-1)] )
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-integral-windup-and-anti-windup-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      4. Integral Windup and Anti-Windup Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Integral Windup and Anti-Windup Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-problem-definition" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Problem Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-mitigation-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Mitigation Strategies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-pid-parameter-tuning" class="md-nav__link">
    <span class="md-ellipsis">
      5. PID Parameter Tuning
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. PID Parameter Tuning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-empirical-tuning-methodology" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Empirical Tuning Methodology
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-quantitative-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Quantitative Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-parameter-sensitivity" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Parameter Sensitivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-system-implementation-and-validation" class="md-nav__link">
    <span class="md-ellipsis">
      6. System Implementation and Validation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. System Implementation and Validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-discrete-implementation-in-software" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 Discrete Implementation in Software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-testing-and-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 Testing and Visualization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-safety-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      6.3 Safety Considerations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-scientific-context-and-discussion" class="md-nav__link">
    <span class="md-ellipsis">
      7. Scientific Context and Discussion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      8. Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="longitudinal-control-of-a-vehicle">Longitudinal Control of a Vehicle</h1>
<h2 id="abstract">Abstract</h2>
<p>Longitudinal control governs the <strong>forward motion</strong> of an autonomous vehicle by modulating throttle and braking to maintain a target velocity derived from the path planner. This section presents a rigorous, scientific formulation of the <strong>PID (Proportional–Integral–Derivative) controller</strong>, its discrete implementation for digital systems, and tuning strategies for stable and responsive speed control.
The objective is to minimize velocity tracking error while ensuring comfort, safety, and dynamic stability under variable road and vehicle conditions.</p>
<hr />
<h2 id="1-introduction">1. Introduction</h2>
<p>Longitudinal control is the temporal counterpart to lateral control. While lateral control manages the <strong>spatial trajectory</strong>, longitudinal control dictates <strong>how fast</strong> the vehicle progresses along that trajectory.</p>
<p>The design must satisfy two constraints:</p>
<ol>
<li><strong>Accuracy</strong> — precisely follow the desired speed profile.</li>
<li><strong>Smoothness</strong> — avoid jerky accelerations or overshoot that degrade comfort or traction.</li>
</ol>
<p>The <strong>PID controller</strong> remains the cornerstone of industrial control due to its simplicity, interpretability, and well-understood dynamics. When properly tuned, it achieves near-optimal performance for a wide range of linear and quasi-linear systems, including vehicle longitudinal dynamics.</p>
<hr />
<h2 id="2-the-pid-control-law">2. The PID Control Law</h2>
<h3 id="21-control-objective">2.1 Control Objective</h3>
<p>The goal is to minimize the instantaneous <strong>velocity tracking error</strong>:
[
e(t) = v_{\text{target}}(t) - v(t)
]
where ( v_{\text{target}} ) is the desired velocity profile and ( v(t) ) is the measured velocity.</p>
<p>The controller outputs a unified control signal ( u(t) ), determining throttle or braking intensity. The system continuously updates ( u(t) ) at discrete time intervals ( \Delta t ).</p>
<hr />
<h3 id="22-discrete-pid-formulation">2.2 Discrete PID Formulation</h3>
<p>The control law is implemented in discrete time as:
[
u(t) = K_p e(t) + K_i \sum_{l=0}^{t} e(l) \Delta t + K_d \frac{e(t) - e(t-1)}{\Delta t}
]</p>
<p>Where:</p>
<ul>
<li>( K_p ) controls proportional response to instantaneous error.</li>
<li>( K_i ) accumulates past errors to remove steady-state bias.</li>
<li>( K_d ) anticipates error change to dampen oscillations.</li>
</ul>
<p>The throttle and brake commands are derived directly from ( u(t) ):
[
a_{\text{gas}}(t) = \max(0, u(t)), \quad a_{\text{brake}}(t) = \max(0, -u(t))
]</p>
<p>This ensures mutual exclusivity—only one actuator is active at a time, consistent with vehicle hardware constraints.</p>
<hr />
<h3 id="23-control-theoretic-interpretation">2.3 Control-Theoretic Interpretation</h3>
<p>The PID controller represents a <strong>closed-loop negative feedback system</strong>. The proportional term reacts to instantaneous deviations, the integral term ensures zero steady-state error, and the derivative term predicts future behavior.</p>
<p>In the Laplace domain, the continuous PID transfer function is:
[
G_c(s) = K_p + \frac{K_i}{s} + K_d s
]</p>
<p>The <strong>proportional</strong> component contributes immediate corrective action.
The <strong>integral</strong> component adds memory, driving long-term accuracy.
The <strong>derivative</strong> component introduces predictive damping, shaping system response akin to velocity feedback in mechanical systems.</p>
<p>Together, they form a controller capable of first-order and second-order dynamic compensation, approximating ideal behavior for a second-order plant—such as vehicle acceleration governed by engine torque and drag forces.</p>
<hr />
<h2 id="3-understanding-the-components">3. Understanding the Components</h2>
<h3 id="31-proportional-term-k_p-et">3.1 Proportional Term ( K_p e(t) )</h3>
<ul>
<li>Reacts to current deviation.</li>
<li>Larger ( K_p ) increases responsiveness but risks <strong>oscillations</strong> and <strong>overshoot</strong> if the system becomes underdamped.</li>
<li>Physically, this term controls the aggressiveness of throttle and braking response.</li>
</ul>
<h3 id="32-integral-term-k_i-sum-el">3.2 Integral Term ( K_i \sum e(l) )</h3>
<ul>
<li>Compensates for <strong>system bias</strong>—for example, aerodynamic drag or rolling resistance—by accumulating past errors.</li>
<li>Eliminates steady-state offset where the car stabilizes below target speed.</li>
<li>However, excessive accumulation leads to <strong>integral windup</strong>, a nonlinear phenomenon where the integrator drives the actuator beyond its physical limits.</li>
</ul>
<h3 id="33-derivative-term-k_d-et-et-1">3.3 Derivative Term ( K_d [e(t) - e(t-1)] )</h3>
<ul>
<li>Responds to the <strong>rate of error change</strong>, providing anticipatory correction.</li>
<li>Helps prevent overshoot and stabilizes transient response, functioning as a form of <strong>velocity feedback</strong>.</li>
<li>Sensitivity to measurement noise requires signal filtering (e.g., a first-order low-pass filter).</li>
</ul>
<hr />
<h2 id="4-integral-windup-and-anti-windup-techniques">4. Integral Windup and Anti-Windup Techniques</h2>
<h3 id="41-problem-definition">4.1 Problem Definition</h3>
<p>In real systems, actuators saturate. For example, throttle cannot exceed 100%, and braking cannot go below 0. When such limits are reached, the integral term continues to accumulate error, leading to <strong>overshoot</strong> once the actuator is released.</p>
<h3 id="42-mitigation-strategies">4.2 Mitigation Strategies</h3>
<ol>
<li>
<p><strong>Integral Clamping</strong></p>
</li>
<li>
<p>Bound the integral accumulation term within a predefined range:
     [
     I_{\text{clamped}} = \text{clip}(I, -I_{\max}, I_{\max})
     ]</p>
</li>
<li>
<p>Prevents runaway accumulation.</p>
</li>
<li>
<p><strong>Conditional Integration</strong></p>
</li>
<li>
<p>Freeze integral updates when the control signal reaches saturation limits.</p>
</li>
<li>
<p><strong>Back-Calculation Anti-Windup</strong></p>
</li>
<li>
<p>Introduce a feedback term that subtracts the difference between saturated and unsaturated control signals, effectively "bleeding off" accumulated error.</p>
</li>
</ol>
<p>These techniques ensure numerical stability and enable predictable response recovery after saturation events such as sudden stops or steep inclines.</p>
<hr />
<h2 id="5-pid-parameter-tuning">5. PID Parameter Tuning</h2>
<h3 id="51-empirical-tuning-methodology">5.1 Empirical Tuning Methodology</h3>
<p>PID tuning is an <strong>iterative experimental process</strong>, as real vehicle dynamics are nonlinear and time-varying. The general tuning procedure:</p>
<ol>
<li>
<p><strong>Proportional Phase:</strong></p>
</li>
<li>
<p>Set ( K_i = 0, K_d = 0 ).</p>
</li>
<li>
<p>Increase ( K_p ) until the system responds rapidly without oscillating excessively.</p>
</li>
<li>
<p><strong>Derivative Phase:</strong></p>
</li>
<li>
<p>Gradually increase ( K_d ) to reduce overshoot and improve damping.</p>
</li>
<li>
<p>Observe the step response—higher ( K_d ) produces smoother convergence but can amplify sensor noise.</p>
</li>
<li>
<p><strong>Integral Phase:</strong></p>
</li>
<li>
<p>Introduce ( K_i ) to eliminate steady-state error.</p>
</li>
<li>Apply anti-windup logic to constrain integral growth.</li>
</ol>
<hr />
<h3 id="52-quantitative-evaluation">5.2 Quantitative Evaluation</h3>
<p>Performance can be measured by:</p>
<ul>
<li><strong>Rise time</strong>: time to reach 90% of the target speed.</li>
<li><strong>Settling time</strong>: time to stabilize within ±5% of the target.</li>
<li><strong>Overshoot</strong>: percentage by which speed exceeds target.</li>
<li><strong>Steady-state error</strong>: residual difference after settling.</li>
</ul>
<p>Optimization methods such as <strong>Ziegler–Nichols</strong> or <strong>Cohen–Coon</strong> rules provide initial parameter estimates, but fine-tuning is typically empirical due to the vehicle’s nonlinear friction and torque dynamics.</p>
<hr />
<h3 id="53-parameter-sensitivity">5.3 Parameter Sensitivity</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Function</th>
<th>Increasing Value Effects</th>
</tr>
</thead>
<tbody>
<tr>
<td>( K_p )</td>
<td>Immediate error correction</td>
<td>Faster response, higher overshoot</td>
</tr>
<tr>
<td>( K_i )</td>
<td>Long-term bias elimination</td>
<td>Lower steady-state error, possible oscillations</td>
</tr>
<tr>
<td>( K_d )</td>
<td>Predictive damping</td>
<td>Reduced overshoot, noise sensitivity</td>
</tr>
</tbody>
</table>
<p>The tuning must adapt to external conditions such as road slope, aerodynamic drag, and tire friction. Hence, practical implementations often employ <strong>gain scheduling</strong>, adjusting gains dynamically based on vehicle speed or load.</p>
<hr />
<h2 id="6-system-implementation-and-validation">6. System Implementation and Validation</h2>
<h3 id="61-discrete-implementation-in-software">6.1 Discrete Implementation in Software</h3>
<p>The controller can be implemented in <code>longitudinal_control.py</code> as follows:</p>
<ul>
<li>Maintain persistent variables for ( e(t-1) ) and the integral sum.</li>
<li>Apply clamping to limit the control signal within actuator bounds.</li>
<li>Use consistent sampling intervals (e.g., 50–100 Hz) to ensure numerical stability.</li>
</ul>
<h3 id="62-testing-and-visualization">6.2 Testing and Visualization</h3>
<p><code>test_longitudinal_control.py</code> provides time-series plots of target vs. actual velocity.
Through iterative tests, the user can visualize convergence, overshoot, and steady-state performance, tuning gains accordingly.</p>
<h3 id="63-safety-considerations">6.3 Safety Considerations</h3>
<ul>
<li>Avoid excessively high ( K_p ) or ( K_i ) values, which can cause aggressive acceleration or braking.</li>
<li>Validate under varying conditions—flat, uphill, and downhill—to ensure robustness.</li>
</ul>
<hr />
<h2 id="7-scientific-context-and-discussion">7. Scientific Context and Discussion</h2>
<p>From a control theory perspective, the PID controller embodies a <strong>low-order approximation of optimal feedback</strong>. It can be derived from linear quadratic regulator (LQR) principles under simplified plant dynamics, where proportional, integral, and derivative actions correspond to state, accumulation, and rate feedback respectively.</p>
<p>Despite its simplicity, the PID framework remains prevalent due to:</p>
<ul>
<li><strong>Computational efficiency</strong>—requires no model inversion or matrix operations.</li>
<li><strong>Interpretability</strong>—each term has a clear physical meaning.</li>
<li><strong>Adaptability</strong>—can be extended into advanced architectures such as <strong>PI-D cascades</strong>, <strong>adaptive PID</strong>, or <strong>model predictive control (MPC)</strong>.</li>
</ul>
<p>In vehicle dynamics, longitudinal PID control provides a foundation for higher-level adaptive cruise control, traction management, and energy-optimized driving strategies.</p>
<hr />
<h2 id="8-conclusion">8. Conclusion</h2>
<p>The longitudinal control system translates velocity commands into actionable throttle and braking inputs through a <strong>discrete PID controller</strong>. By combining reactive, integrative, and predictive behaviors, it achieves stable speed tracking across diverse driving conditions.</p>
<p>Scientific rigor in design—proper discretization, anti-windup protection, and gain tuning—ensures both robustness and comfort.
This module demonstrates how classical control theory, when precisely implemented and tuned, continues to outperform complex learning-based systems in safety-critical tasks requiring <strong>stability, interpretability, and verifiability</strong>.</p>
<h1 id="longitudinal-control">Longitudinal Control</h1>
<p><code>LongitudinalController</code> uses a PID regulator to map the target speed to gas and
brake commands.</p>
<h2 id="pid-design">PID design</h2>
<ul>
<li><strong>Proportional (<code>KP</code>)</strong> – matches the steady-state acceleration to the speed
  error.</li>
<li><strong>Integral (<code>KI</code>)</strong> – compensates for drag or road grade; the accumulated error
  is clamped by <code>integral_windup_limit</code> to avoid overshoot.</li>
<li><strong>Derivative (<code>KD</code>)</strong> – damps oscillations by reacting to error changes. The
  implementation guards against division by zero by enforcing a minimum <code>dt</code>.</li>
</ul>
<h2 id="command-translation">Command translation</h2>
<p>The PID output is interpreted as longitudinal force:</p>
<ul>
<li>Positive command → throttle, clipped to <code>[0, max_gas]</code> (default 0.8).</li>
<li>Negative command → brake, clipped to <code>[0, max_brake]</code> (default 0.8).</li>
<li>Both channels cannot be active simultaneously.</li>
</ul>
<h2 id="episode-management">Episode management</h2>
<p>Call <code>reset()</code> before each episode to clear the integrator and derivative state.
The controller maintains optional histories (<code>speed_history</code>,
<code>target_speed_history</code>) that can be plotted for debugging with <code>plot_speed</code>.</p>
<h2 id="recommended-gains">Recommended gains</h2>
<table>
<thead>
<tr>
<th>Condition</th>
<th>KP</th>
<th>KI</th>
<th>KD</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Default flat track</td>
<td>0.08</td>
<td>0.01</td>
<td>0.02</td>
<td>Aggressive but stable at 50 Hz.</td>
</tr>
<tr>
<td>High curvature sections</td>
<td>0.06</td>
<td>0.02</td>
<td>0.03</td>
<td>Slightly more damping to handle rapid slowdowns.</td>
</tr>
<tr>
<td>Slippery surfaces</td>
<td>0.04</td>
<td>0.02</td>
<td>0.0</td>
<td>Avoids derivative noise from wheel slip.</td>
</tr>
</tbody>
</table>
<p>Tune KP first, then KI, and finally KD. Always re-validate using the
leaderboard seeds defined in <code>config.yml</code>.</p>
<h2 id="configuration-hooks">Configuration hooks</h2>
<p>Adjust PID gains, integrator clamp, and actuator saturation via
<code>control.longitudinal</code> in <code>config.yml</code>. Reduce <code>max_gas</code>/<code>max_brake</code> when
testing hardware-in-the-loop rigs to respect actuator limits.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.top", "toc.follow"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>