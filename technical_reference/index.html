
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Deterministic reference stack for the CarRacing-v3 simulator">
      
      
      
        <link rel="canonical" href="https://example.com/technical_reference/">
      
      
        <link rel="prev" href="..">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Scientific Reference - Modular SDC Pipeline</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#scientific-reference-manual" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Modular SDC Pipeline" class="md-header__button md-logo" aria-label="Modular SDC Pipeline" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Modular SDC Pipeline
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Scientific Reference
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/USER/Modular-SDC-Pipeline" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Modular SDC Pipeline" class="md-nav__button md-logo" aria-label="Modular SDC Pipeline" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Modular SDC Pipeline
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/USER/Modular-SDC-Pipeline" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Scientific Reference
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Scientific Reference
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#architectural-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architectural overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architectural overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timing-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Timing model
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perception-lane-boundary-extraction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perception: lane boundary extraction
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#planning-geometric-and-speed-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        Planning: geometric and speed references
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Planning: geometric and speed references">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#waypoint-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Waypoint generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-speed-prediction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Target-speed prediction
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-vehicle-dynamics-simplifications" class="md-nav__link">
    <span class="md-ellipsis">
      
        Control: vehicle dynamics simplifications
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control: vehicle dynamics simplifications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lateral-steering-stanley-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lateral steering (Stanley method)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#longitudinal-pid-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Longitudinal PID control
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-surface" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration surface
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-and-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verification and testing
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#live-telemetry-and-observers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Live telemetry and observers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extensibility-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extensibility guidelines
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#architectural-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architectural overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architectural overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timing-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Timing model
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perception-lane-boundary-extraction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perception: lane boundary extraction
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#planning-geometric-and-speed-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        Planning: geometric and speed references
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Planning: geometric and speed references">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#waypoint-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Waypoint generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-speed-prediction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Target-speed prediction
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-vehicle-dynamics-simplifications" class="md-nav__link">
    <span class="md-ellipsis">
      
        Control: vehicle dynamics simplifications
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control: vehicle dynamics simplifications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lateral-steering-stanley-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lateral steering (Stanley method)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#longitudinal-pid-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Longitudinal PID control
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-surface" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration surface
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-and-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verification and testing
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#live-telemetry-and-observers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Live telemetry and observers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extensibility-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extensibility guidelines
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="scientific-reference-manual">Scientific Reference Manual</h1>
<p>The modular self-driving pipeline consists of analytically defined perception,
planning, and control stages operating on the Gymnasium <code>CarRacing-v3</code>
simulator. Each stage obeys an explicit interface so that alternative
algorithms can be swapped in without touching the remaining stack.</p>
<h2 id="architectural-overview">Architectural overview</h2>
<div class="highlight"><pre><span></span><code>flowchart LR
    I[Observation $x_t$] --&gt;|Perception| P[LaneDetectionModule\\n$\mathcal{L}$]
    P --&gt;|Lanes| W[WaypointPlanningModule\\n$\mathcal{P}_w$]
    W --&gt;|Waypoints| S[TargetSpeedPlanningModule\\n$\mathcal{P}_v$]
    S --&gt;|Reference speed| C1[LateralControlModule\\n$\mathcal{C}_\delta$]
    W --&gt; C1
    S --&gt; C2[LongitudinalControlModule\\n$\mathcal{C}_a$]
    C1 --&gt; A[Action vector $u_t$]
    C2 --&gt; A
    A --&gt; E[Gymnasium environment]
    E --&gt;|reward, speed| M[ModularPipeline]
    M --&gt;|next observation| I
</code></pre></div>
<p>At runtime the <code>ModularPipeline</code> orchestrator (see <code>modular_pipeline.py</code>)
drives these modules according to the configuration loaded from <code>config.yml</code>.</p>
<h3 id="timing-model">Timing model</h3>
<p>Episodes run at a configurable discrete timestep $\Delta t$ (default
$1/50\,\text{s}$). For step index $k$, the pipeline evaluates modules with the
context</p>
<p>$$
\mathcal{C}_k = {k,\ v_k,\ \Delta t},
$$</p>
<p>where $v_k$ is the simulator-reported longitudinal speed.</p>
<h2 id="perception-lane-boundary-extraction">Perception: lane boundary extraction</h2>
<p>The perception stage crops the RGB observation to the region in front of the
vehicle, converts it to intensity, and derives horizontal/vertical gradients
$\partial_x I$ and $\partial_y I$. The gradient magnitude used for peak
searching is</p>
<p>$$
G = |\partial_x I| + |\partial_y I|.
$$</p>
<p>Row-wise maxima separated by a minimum distance form candidate lane points.
The first valid pair above the vehicle seed two sets of points that are tracked
upward row by row. The final polylines are smoothed with a cubic B-spline to
produce left/right boundaries $L$ and $R$.</p>
<h2 id="planning-geometric-and-speed-references">Planning: geometric and speed references</h2>
<h3 id="waypoint-generation">Waypoint generation</h3>
<p>The waypoint planner fits a centreline spline by minimizing a curvature
regularised functional</p>
<p>$$
J(C) = \sum_{i=1}^{N} |C(s_i) - m_i|_2^2 + \beta \int \kappa(s)^2\, ds,
$$</p>
<p>where $m_i$ are midpoints between $L$ and $R$, $\kappa(s)$ is the spline
curvature, and $\beta$ is the smoothing weight (<code>planning.waypoints.smoothing_beta</code>).
The planner outputs $N$ waypoints expressed in the vehicle frame.</p>
<h3 id="target-speed-prediction">Target-speed prediction</h3>
<p>Curvature-driven speed selection uses the reciprocal curvature $\kappa$ of the
centreline:</p>
<p>$$
\hat{v} = \operatorname{clip}\left( v_{\min}, v_{\max}, v_{\max} - K_v\, |\kappa| \right),
$$</p>
<p>with gains configured via <code>planning.target_speed</code>. The planner optionally
averages multiple forward-looking waypoints to damp oscillations.</p>
<h2 id="control-vehicle-dynamics-simplifications">Control: vehicle dynamics simplifications</h2>
<h3 id="lateral-steering-stanley-method">Lateral steering (Stanley method)</h3>
<p>The Stanley controller combines heading error $\psi_k$ and cross-track error
$d_k$:</p>
<p>$$
\delta_k = \psi_k + \arctan\left(\frac{k_s d_k}{v_k + \varepsilon}\right) -
\lambda (\delta_k - \delta_{k-1}),
$$</p>
<p>where $k_s$ is the gain (<code>control.lateral.gain_constant</code>) and $\lambda$ is the
first-order damping term (<code>control.lateral.damping_constant</code>). Image-frame
waypoints $(x_{\text{img}}, y_{\text{img}})$ are rotated into a vehicle-centric
frame by treating $y_{\text{img}}$ as the forward axis and centring
$x_{\text{img}}$ around <code>control.lateral.vehicle_center_x</code>. The command is
clipped to <code>control.lateral.steering_limit</code> radians (default $\pm 0.4$ rad) and
rescaled to $[-1,1]$ before submission.</p>
<h3 id="longitudinal-pid-control">Longitudinal PID control</h3>
<p>Throttle/brake are derived from a discrete PID law applied to the speed error
$e_k = v^*_k - v_k$:</p>
<p>$$
\begin{aligned}
P_k &amp;= K_P e_k,\
I_k &amp;= I_{k-1} + K_I e_k \Delta t,\
D_k &amp;= K_D \frac{e_k - e_{k-1}}{\Delta t},\
u_k &amp;= P_k + I_k + D_k.
\end{aligned}
$$</p>
<p>The integral term is clamped to <code>control.longitudinal.integral_windup_limit</code>.
Positive $\nu_k$ commands throttle while negative $\nu_k$ maps to brake
pressure, both bounded by <code>control.longitudinal.max_gas</code> and
<code>control.longitudinal.max_brake</code>.</p>
<h2 id="configuration-surface">Configuration surface</h2>
<p>All tunable parameters live in <code>config.yml</code> and mirror the dataclasses in
<code>src/configuration.py</code>:</p>
<ul>
<li><code>perception.lane_detection.*</code> controls cropping, spline smoothness, and
  gradient thresholds.</li>
<li><code>planning.waypoints</code> sets waypoint count, interpolation model (<code>way_type</code>),
  and smoothing weight.</li>
<li><code>planning.target_speed</code> configures curvature gain and admissible speed range.</li>
<li><code>control.lateral</code> exposes the Stanley gains, image-to-vehicle alignment, and
  steering saturation limit, while <code>control.longitudinal</code> contains the PID
  coefficients.</li>
<li><code>monitoring.dashboard</code> toggles the live Matplotlib dashboard and the length of
  its rolling history window.</li>
<li><code>runtime.*</code> chooses episode horizon and timestep.</li>
<li><code>environment.*</code> specifies the Gymnasium environment ID, render mode, and
  wrapper behaviour.</li>
</ul>
<p>Switch configurations at runtime via</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>modular_pipeline.py<span class="w"> </span>--config<span class="w"> </span>custom.yml
</code></pre></div>
<h2 id="verification-and-testing">Verification and testing</h2>
<p>Automated tests cover module contracts as well as the orchestrator wiring:</p>
<ul>
<li>Unit tests in <code>tests/</code> validate perception, planning, and control behaviours.</li>
<li><code>tests/test_pipeline_integration.py</code> instantiates a synthetic environment and
  stub modules to verify that resets, context propagation, and command
  aggregation all operate correctly.</li>
<li><code>mkdocs build</code> ensures the documentation renders without warnings.</li>
</ul>
<h2 id="live-telemetry-and-observers">Live telemetry and observers</h2>
<p><code>ModularPipeline</code> accepts optional observers implementing the
<code>PipelineObserver</code> protocol. An observer receives the full step context</p>
<p>$$
\Xi_k = {x_k,\ \mathcal{L}_k,\ \mathcal{P}_k,\ u_k,\ r_k,\ v_k},
$$</p>
<p>where $x_k$ is the rendered frame, $\mathcal{L}_k$ the perception output,
$\mathcal{P}_k$ the planning state, $u_k$ the control command, and $r_k$ the
reward. The built-in <code>LiveDashboard</code> observer (enabled by default) renders this
stream with four synchronized panes:</p>
<ol>
<li>Observation preview.</li>
<li>Lane boundaries and centreline waypoints.</li>
<li>Target speed $v^*_k$ versus measured velocity $v_k$.</li>
<li>Normalized steering, throttle, and brake commands.</li>
</ol>
<p>The dashboard is invaluable when tuning controller gains: deviations between
$v^*_k$ and $v_k$ immediately highlight PID misconfiguration, while steering
oscillations show up as large gradients in the command trace. Disable the
dashboard in headless environments via <code>--no_display</code> or by setting
<code>monitoring.dashboard.enabled</code> to <code>false</code> in <code>config.yml</code>.</p>
<h2 id="extensibility-guidelines">Extensibility guidelines</h2>
<ol>
<li>Implement the appropriate protocol from <code>src/pipeline/interfaces.py</code>
   (<code>PerceptionModule</code>, <code>PlanningModule</code>, or <code>ControlModule</code>).</li>
<li>Register the new module in <code>build_pipeline</code> or compose it programmatically.</li>
<li>Declare any new hyper-parameters in <code>config.yml</code> and extend the
   configuration dataclasses.</li>
<li>Document the mathematical model and tuning recommendations in this manual.</li>
</ol>
<p>The modular structure allows researchers to experiment with advanced perception
(e.g. neural lane segmentation), nonlinear model predictive control, or
reinforcement learning components while preserving a reproducible evaluation
harness.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.expand", "navigation.top", "toc.follow"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>